var IbanConverter=(function(){function IbanConverter(){var iban=undefined;this.getIBAN=function(){var tempIban=iban;return tempIban;};this.setIBAN=function(bban){if($("#iban-converter-trigger").length>0){waitingDialog();}$.getJSON("/ebank/sepapayment/convertAccountToIban.do?account="+bban,function(data){if(data.foundIbanAccount){$("#iban-converter p.error").hide();iban=data.ibanAccountNumber;$("#bban").val(bban);$("#converted-iban").html(iban);if($("#iban-converter-trigger").length>0){$(".icon.copy.with-tooltip").show();closeWaitingDialog();}return iban;}else{$("#iban-converter p.error").show();$(".icon.copy.with-tooltip").hide();$("#converted-iban").html("");if($("#iban-converter-trigger").length>0){closeWaitingDialog();}}});};this.hasIBAN=function(){return(iban!=undefined);};if($("#iban-converter-trigger").length>0){this.copyIBAN=function(){$("input.account-field").on("click.copyCalcIban",function(){if(ibanConverter.hasIBAN()){$(this).val(ibanConverter.getIBAN());}$("input.account-field").off("click.copyCalcIban");});$("#iban-converter").dialog("close");};}if($("#iban-converter-trigger").length>0){$("#iban-converter-trigger").on("click",function(){$("#iban-converter").dialog("open");});$("body").append('<div id="iban-converter" style="display:none;"></div>');$.get("/ebank/sepapayment/initIbanConverter.do",function(data){$("#iban-converter").html(data);$(document.body).on("keydown","#bban",function(e){if(e.which===13){ibanConverter.setIBAN($("#bban").val());}});});$("#iban-converter").dialog({autoOpen:false,width:"392px",title:cbs.labels.ibanConvTitle,resizable:false,modal:true});}}var instance;return{getInstance:function(){if(instance==null){instance=new IbanConverter();instance.constructor=null;}else{console.log("WARNING trying to create second instance of IbanConverter.");}return instance;}};})();$(document).ready(function(){window.ibanConverter=IbanConverter.getInstance();$("#bban").trigger("focus");if($("#iban-converter-trigger").length>0){}else{$(document.body).on("keydown","#bban",function(event){if(event.key==="Enter"){ibanConverter.setIBAN($("#bban").val());}});}$("button").on("keydown",function(event){if(event.key==="Enter"){$(this).trigger("click");}});});